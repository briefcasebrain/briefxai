#!/bin/bash
# BriefXAI launcher script

# Check if cargo is available
if ! command -v cargo &> /dev/null; then
    # Try to source cargo environment
    if [ -f "$HOME/.cargo/env" ]; then
        source "$HOME/.cargo/env"
    else
        echo "Error: Cargo not found. Please install Rust from https://rustup.rs/"
        exit 1
    fi
fi

# Get the directory where this script is located
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# Check if the binary exists
if [ -f "$SCRIPT_DIR/target/release/briefxai" ]; then
    # Run the release binary
    exec "$SCRIPT_DIR/target/release/briefxai" "$@"
elif [ -f "$SCRIPT_DIR/target/debug/briefxai" ]; then
    # Run the debug binary if release doesn't exist
    exec "$SCRIPT_DIR/target/debug/briefxai" "$@"
else
    echo "BriefXAI binary not found. Building..."
    cd "$SCRIPT_DIR"
    cargo build --release
    exec "$SCRIPT_DIR/target/release/briefxai" "$@"
fi