<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BriefXAI - Progressive Analysis Interface</title>
    <link rel="stylesheet" href="static/progressive-disclosure.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div id="app" class="app-container">
        <!-- Progressive Interface Container -->
        <div class="interface-wrapper">
            <!-- Level 1: Simple Start -->
            <div id="level-1" class="disclosure-level active">
                <div class="simple-interface">
                    <div class="brand-header">
                        <div class="logo">üéØ</div>
                        <h1>BriefXAI</h1>
                        <p class="tagline">Understand your conversations instantly</p>
                    </div>
                    
                    <div class="simple-upload-area">
                        <div class="upload-prompt">
                            <div class="upload-icon">üìÅ</div>
                            <h2>Drop your conversation file here</h2>
                            <p>JSON format ‚Ä¢ Up to 10,000 conversations</p>
                            
                            <div class="upload-actions">
                                <button class="btn-primary large" onclick="triggerFileUpload()">
                                    Choose File
                                </button>
                                <button class="btn-link" onclick="tryExample()">
                                    Try with example data
                                </button>
                            </div>
                            <input type="file" id="file-input" accept=".json" style="display: none;">
                        </div>
                    </div>
                    
                    <!-- Progress hint -->
                    <div class="progress-hint" id="level-1-progress" style="display: none;">
                        <div class="hint-content">
                            <span class="hint-icon">‚ö°</span>
                            <span>Analyzing your data...</span>
                            <div class="simple-progress">
                                <div class="progress-dots">
                                    <div class="dot active"></div>
                                    <div class="dot"></div>
                                    <div class="dot"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Level 2: Basic Results -->
            <div id="level-2" class="disclosure-level">
                <div class="basic-results-interface">
                    <div class="results-header">
                        <div class="back-action">
                            <button class="btn-ghost" onclick="goToLevel(1)">
                                ‚Üê Start Over
                            </button>
                        </div>
                        <div class="results-title">
                            <h2>Your Conversation Analysis</h2>
                            <p class="data-summary" id="data-summary">Analyzed 1,234 conversations</p>
                        </div>
                        <div class="expand-action">
                            <button class="btn-secondary" onclick="showMoreOptions()" id="more-options-btn">
                                More Options ‚Üí
                            </button>
                        </div>
                    </div>
                    
                    <div class="key-insights-grid">
                        <div class="insight-card primary">
                            <div class="insight-icon">üìä</div>
                            <div class="insight-content">
                                <h3 id="main-insight-title">Top Discussion Topic</h3>
                                <p class="insight-value" id="main-insight-value">Technical Support</p>
                                <p class="insight-detail" id="main-insight-detail">34% of conversations</p>
                            </div>
                        </div>
                        
                        <div class="insight-card">
                            <div class="insight-icon">üòä</div>
                            <div class="insight-content">
                                <h3>Overall Sentiment</h3>
                                <p class="insight-value" id="sentiment-value">Positive</p>
                                <p class="insight-detail" id="sentiment-detail">67% positive tone</p>
                            </div>
                        </div>
                        
                        <div class="insight-card">
                            <div class="insight-icon">üîç</div>
                            <div class="insight-content">
                                <h3>Key Patterns</h3>
                                <p class="insight-value" id="patterns-value">8 patterns</p>
                                <p class="insight-detail" id="patterns-detail">Including recurring themes</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="simple-visualization">
                        <div class="viz-header">
                            <h3>Conversation Topics</h3>
                            <button class="btn-link" onclick="expandVisualization()">
                                View Interactive Map ‚Üí
                            </button>
                        </div>
                        <div class="simple-viz-container" id="simple-viz">
                            <!-- Simple bubble chart will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="action-suggestions">
                        <div class="suggestion-card" onclick="exploreTopics()">
                            <div class="suggestion-icon">üó∫Ô∏è</div>
                            <div class="suggestion-content">
                                <h4>Explore Topic Map</h4>
                                <p>See how conversations connect and cluster</p>
                            </div>
                        </div>
                        
                        <div class="suggestion-card" onclick="showPatterns()">
                            <div class="suggestion-icon">üîç</div>
                            <div class="suggestion-content">
                                <h4>Discover Patterns</h4>
                                <p>Find recurring themes and issues</p>
                            </div>
                        </div>
                        
                        <div class="suggestion-card" onclick="exportResults()">
                            <div class="suggestion-icon">üì•</div>
                            <div class="suggestion-content">
                                <h4>Export Insights</h4>
                                <p>Save your analysis results</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Level 3: Advanced Interface -->
            <div id="level-3" class="disclosure-level">
                <div class="advanced-interface">
                    <!-- Advanced Navigation -->
                    <nav class="advanced-nav">
                        <div class="nav-left">
                            <button class="nav-btn" onclick="goToLevel(2)">‚Üê Simple View</button>
                            <div class="nav-divider"></div>
                            <div class="nav-tabs">
                                <button class="nav-tab active" data-view="overview" onclick="switchView('overview')">Overview</button>
                                <button class="nav-tab" data-view="map" onclick="switchView('map')">Topic Map</button>
                                <button class="nav-tab" data-view="patterns" onclick="switchView('patterns')">Patterns</button>
                                <button class="nav-tab" data-view="timeline" onclick="switchView('timeline')">Timeline</button>
                                <button class="nav-tab expert-only" data-view="raw-data" onclick="switchView('raw-data')" style="display: none;">Raw Data</button>
                            </div>
                        </div>
                        <div class="nav-right">
                            <button class="nav-btn" onclick="toggleExpertMode()" id="expert-toggle">
                                Expert Mode
                            </button>
                            <button class="nav-btn" onclick="showSettings()">‚öôÔ∏è</button>
                            <button class="nav-btn" onclick="showHelp()">‚ùì</button>
                        </div>
                    </nav>
                    
                    <!-- Advanced Content Areas -->
                    <div class="advanced-content">
                        <!-- Overview View -->
                        <div id="overview-view" class="content-view active">
                            <div class="overview-layout">
                                <div class="stats-panel">
                                    <div class="stat-group">
                                        <div class="stat-item">
                                            <span class="stat-number" id="total-convs">1,234</span>
                                            <span class="stat-label">Conversations</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-number" id="total-topics">23</span>
                                            <span class="stat-label">Topics</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-number" id="avg-length">156</span>
                                            <span class="stat-label">Avg Length</span>
                                        </div>
                                    </div>
                                    
                                    <div class="insight-panel" id="dynamic-insights">
                                        <!-- Dynamic insights will be populated here -->
                                    </div>
                                </div>
                                
                                <div class="main-viz-panel">
                                    <div class="viz-controls">
                                        <select id="viz-mode" onchange="updateVisualization()">
                                            <option value="bubbles">Topic Bubbles</option>
                                            <option value="network">Connection Network</option>
                                            <option value="timeline">Timeline View</option>
                                        </select>
                                        <button onclick="resetVisualization()">Reset</button>
                                    </div>
                                    <div class="main-visualization" id="main-viz">
                                        <!-- Main visualization renders here -->
                                    </div>
                                </div>
                                
                                <div class="detail-panel" id="detail-panel">
                                    <div class="detail-placeholder">
                                        <div class="placeholder-icon">üëÜ</div>
                                        <p>Click on any topic or conversation to see details</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Topic Map View -->
                        <div id="map-view" class="content-view">
                            <div class="map-layout">
                                <div class="map-controls">
                                    <div class="control-group">
                                        <label>Layout:</label>
                                        <select id="map-layout" onchange="changeMapLayout()">
                                            <option value="force">Force-Directed</option>
                                            <option value="radial">Radial</option>
                                            <option value="grid">Grid</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label>Color by:</label>
                                        <select id="color-mode" onchange="changeColorMode()">
                                            <option value="topic">Topic</option>
                                            <option value="sentiment">Sentiment</option>
                                            <option value="size">Size</option>
                                        </select>
                                    </div>
                                    <div class="control-group expert-only" style="display: none;">
                                        <label>Clustering:</label>
                                        <button onclick="recluster()">Re-cluster</button>
                                    </div>
                                </div>
                                <div class="interactive-map" id="topic-map">
                                    <!-- Interactive topic map renders here -->
                                </div>
                                <div class="map-legend" id="map-legend">
                                    <!-- Dynamic legend -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pattern Analysis View -->
                        <div id="patterns-view" class="content-view">
                            <div class="patterns-layout">
                                <div class="pattern-filters">
                                    <h3>Pattern Discovery</h3>
                                    <div class="filter-group">
                                        <label>
                                            <input type="checkbox" checked onchange="updatePatterns()"> Recurring themes
                                        </label>
                                        <label>
                                            <input type="checkbox" checked onchange="updatePatterns()"> Sentiment patterns
                                        </label>
                                        <label>
                                            <input type="checkbox" checked onchange="updatePatterns()"> Temporal patterns
                                        </label>
                                        <label class="expert-only" style="display: none;">
                                            <input type="checkbox" onchange="updatePatterns()"> Linguistic patterns
                                        </label>
                                    </div>
                                    <button class="btn-primary" onclick="discoverNewPatterns()">
                                        Discover New Patterns
                                    </button>
                                </div>
                                <div class="patterns-results" id="patterns-results">
                                    <!-- Pattern results will be displayed here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Timeline View -->
                        <div id="timeline-view" class="content-view">
                            <div class="timeline-layout">
                                <div class="timeline-controls">
                                    <div class="date-range">
                                        <label>From:</label>
                                        <input type="date" id="date-from">
                                        <label>To:</label>
                                        <input type="date" id="date-to">
                                    </div>
                                    <div class="granularity">
                                        <label>Group by:</label>
                                        <select id="time-granularity" onchange="updateTimeline()">
                                            <option value="day">Day</option>
                                            <option value="week">Week</option>
                                            <option value="month">Month</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="timeline-chart" id="timeline-chart">
                                    <!-- Timeline visualization -->
                                </div>
                                <div class="timeline-insights" id="timeline-insights">
                                    <!-- Timeline-specific insights -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Raw Data View (Expert Only) -->
                        <div id="raw-data-view" class="content-view expert-only" style="display: none;">
                            <div class="raw-data-layout">
                                <div class="data-controls">
                                    <select id="data-view-mode" onchange="changeDataView()">
                                        <option value="table">Table View</option>
                                        <option value="json">JSON View</option>
                                        <option value="export">Export Options</option>
                                    </select>
                                    <input type="search" placeholder="Filter data..." id="data-search">
                                </div>
                                <div class="data-display" id="raw-data-display">
                                    <!-- Raw data display -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Contextual Help System -->
        <div class="help-system" id="help-system" style="display: none;">
            <div class="help-card" id="help-card">
                <div class="help-header">
                    <h4 id="help-title">Getting Started</h4>
                    <button class="help-close" onclick="hideHelp()">√ó</button>
                </div>
                <div class="help-content" id="help-content">
                    <p>Upload your conversation data to get started with analysis.</p>
                </div>
                <div class="help-actions">
                    <button class="btn-link" onclick="prevHelpTip()" id="help-prev" disabled>‚Üê Previous</button>
                    <button class="btn-primary" onclick="nextHelpTip()" id="help-next">Next ‚Üí</button>
                </div>
            </div>
        </div>
        
        <!-- Settings Panel -->
        <div class="settings-panel" id="settings-panel" style="display: none;">
            <div class="settings-content">
                <div class="settings-header">
                    <h3>Settings</h3>
                    <button class="settings-close" onclick="hideSettings()">√ó</button>
                </div>
                
                <div class="settings-section">
                    <h4>Interface Complexity</h4>
                    <div class="complexity-selector">
                        <label class="complexity-option">
                            <input type="radio" name="complexity" value="simple" onchange="setComplexity('simple')">
                            <span>Simple</span>
                            <small>Essential features only</small>
                        </label>
                        <label class="complexity-option">
                            <input type="radio" name="complexity" value="standard" checked onchange="setComplexity('standard')">
                            <span>Standard</span>
                            <small>Balanced interface</small>
                        </label>
                        <label class="complexity-option">
                            <input type="radio" name="complexity" value="expert" onchange="setComplexity('expert')">
                            <span>Expert</span>
                            <small>All features visible</small>
                        </label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4>Auto-suggestions</h4>
                    <label>
                        <input type="checkbox" id="auto-suggestions" checked onchange="updateSettings()">
                        Show contextual suggestions
                    </label>
                    <label>
                        <input type="checkbox" id="smart-defaults" checked onchange="updateSettings()">
                        Use smart defaults
                    </label>
                </div>
                
                <div class="settings-section expert-only" style="display: none;">
                    <h4>Advanced Options</h4>
                    <label>
                        <input type="checkbox" id="debug-mode" onchange="updateSettings()">
                        Debug mode
                    </label>
                    <label>
                        <input type="checkbox" id="performance-metrics" onchange="updateSettings()">
                        Show performance metrics
                    </label>
                </div>
            </div>
        </div>
        
        <!-- Contextual Suggestions -->
        <div class="suggestion-overlay" id="suggestion-overlay" style="display: none;">
            <div class="suggestion-bubble" id="suggestion-bubble">
                <div class="suggestion-content" id="suggestion-content">
                    <span class="suggestion-icon">üí°</span>
                    <p>Try exploring the topics by clicking on the bubbles!</p>
                </div>
                <button class="suggestion-dismiss" onclick="dismissSuggestion()">√ó</button>
            </div>
        </div>
    </div>
    
    <script src="static/progressive-disclosure.js"></script>
</body>
</html>